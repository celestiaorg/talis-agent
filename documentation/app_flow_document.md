# Talis-API App Flow Document

## Introduction

The Talis-API is a specialized agent built in Go to run on Linux servers. Its primary purpose is to continuously monitor key system metrics such as CPU, memory, disk usage, I/O, and network activity. This service is designed to meet the needs of DevOps teams while also serving as an open-source tool for broader integration. It uses the Prometheus client for data collection and exposes several endpoints to handle its unique functions. The agent is configured via a YAML file and packaged as a .deb for ease of installation, ensuring that it reliably collects and reports data as well as executes certain system commands upon request.

## Onboarding and Sign-In/Sign-Up

When a new user sets out to use Talis-API, the journey begins with the installation and configuration process rather than a conventional sign-up flow. There is no traditional user account setup or login page. Instead, users download the .deb package, install the package on a Linux server, and ensure that the necessary directories and configuration file exist in the /etc/talis-agent/ directory. The configuration file, config.yaml, specifies essential parameters like the HTTP port (defaulting to 25550) and the desired log level. If the configuration file is missing or improperly set up, the agent logs a clear error message and fails gracefully to alert the user to correct the setup. This setup step marks the beginning of the user’s interaction with the service.

## Main Dashboard or Home Page

Talis-API does not have a traditional graphical user interface or a dashboard since it is designed as a backend service running in the background. However, once the service is properly installed and configured, the initial point of contact for users or monitoring systems is the /alive endpoint. When a user issues a request to this endpoint, it returns a simple JSON object with a 200 OK status, confirming that the service is running. This endpoint functions as the default landing point and a health check for the service. From this starting point, users can interact with the service by accessing other endpoints as needed, either manually via tools like cURL or automatically through monitoring tools like Prometheus.

## Detailed Feature Flows and Page Transitions

Once the service is running, each endpoint of Talis-API plays a vital role in how users interact with the agent. The journey typically begins with hitting the /alive endpoint to verify service uptime. The /metrics endpoint comes next, which is continuously scraped by Prometheus to gather real-time data on system performance metrics including CPU, memory, disk, I/O, and network usage. When a user or monitoring system sends a request to the /ip endpoint, the service assesses the public IP addresses of the host machine. If multiple public IPs are found, all of them are returned within a JSON object; if there are none, an empty JSON object is provided. For storing data, the /payload endpoint accepts POST requests with any kind of payload and writes the content to the /etc/talis-agent/payload directory on disk. Finally, the /commands endpoint accepts POST requests containing bash commands, piping these commands directly to the system for execution. Although there are no authentication or safety checks in place for this endpoint, its design emphasizes a straightforward approach for authorized users within a trusted environment to run system commands.

## Settings and Account Management

While Talis-API does not involve traditional user account management, configuration is managed via a YAML configuration file. Users are expected to maintain and update the /etc/talis-agent/config.yaml file, where settings like the HTTP port and log level can be adjusted. Any invalid or missing configuration triggers clear error messages to assist users in troubleshooting. Additionally, logging is implemented using the gofiber log package, which logs at the Info level by default unless overridden. This configuration management ensures that the service runs with the desired settings and that system behavior can be monitored through detailed logging. Once configurations are set or updated, users simply restart or reload the service to return to normal operations within the main flow.

## Error States and Alternate Paths

Talis-API has a robust approach to handling errors and unexpected scenarios. If the configuration file is missing or contains errors, the service logs an error message indicating that the required file is not present or is invalid, and the agent fails to start. Throughout its operation, any network issues encountered during metrics collection are logged into a dedicated log file using the gofiber logging functionality, ensuring that issues do not go unnoticed. If an endpoint like /ip fails to detect the public IP or if an error occurs while processing a command from the /commands endpoint, the service either returns an empty JSON object or logs the error appropriately so that users can troubleshoot the issue. In all cases, the system is designed to either fail gracefully or log significant events to ensure that the normal flow can be quickly restored by addressing the underlying issues.

## Conclusion and Overall App Journey

The overall journey with Talis-API begins with the installation and proper configuration of the service using a .deb package and a configuration file in the appropriate directory. Once installed, users confirm the agent’s operational status by accessing the /alive endpoint, then proceed to leverage other endpoints to monitor system metrics, retrieve public IP addresses, store payloads, and execute bash commands. Even though there is no graphical interface or sign-up process, the flow is logical and straightforward, designed to meet the needs of both internal DevOps teams and external users. Detailed logging ensures that each operation and error is recorded, while the integrated testing and packaging process provides confidence in the service’s reliability. The journey is completed by regularly monitoring, updating, and troubleshooting the service as needed, ensuring that Talis-API remains a robust and trusted tool for system monitoring and maintenance.
